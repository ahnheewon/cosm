<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout}">

<head>

<title>insert orders main</title>
<body>
	<div layout:fragment="content">


		<div style="width: 40%; position: relative; top: 50px;">
			<!-- onsubmit="return formOption" -->
			<form id="insertFrm" action="/orders/insertOrderData" method="post">
				<h2>주문등록</h2>
				<input type="hidden" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}" />
				<table id="table">
					<tbody>
						
						
						<tr>
							<th>제품명</th>
							<td><input type="text" id="goodsName" name="goodsName"
								value="TPA502" readonly="readonly"></td>
						</tr>
						<tr>
							<th>납기일자</th>
							<td><input type="date" id=deliveryDate name="deliveryDate"></td>
						</tr>
						<tr>
							<th>수량</th>
							<td><input type="number" id="totalNum" name="totalNum"></td>
						</tr>

						<tr>
							<th>비고</th>
							<td><input type="text" id="note" name="note"></td>
						</tr>

						<tr>
							<th>총금액</th>
							<td><input type="number" id="totalPrice" name="totalPrice"></td>
						</tr>
					</tbody>
				</table>
				<hr>
				<button type="submit" class="btn btn-primary"
					onclick="insertOrderForm()">주문</button>
				<button type="button" class="btn btn-secondary"
					onclick="location.href='/top'">취소</button>
				<input type="hidden" id="usersNo" name="usersNo">
			</form>
		</div>
		<hr>



		<script>
			$('#usersNo').val('[[${session.usersNo}]]');

			$('#insertOrderForm').on('click', function() {
				$('#insertFrm').submit();
			});

			/*
			var result = 
			console.log(resutl);
			$('input[name=uNo]').attr('value'.result);
			
			$('#usersNo').change(function() {
				console.log('#userNo')
				let result = $('#usersNo').val('[[${session.usersNo}]]');
				consloe.log("result");
				$('#uNo').val(result);

			}); */

			/*-----------------
			주문등록 버튼 클릭이벤트
			-------------------*/

			//$('#goodsName').change
			/*-----------------
			hidden으로 받아올 
			goodsNo proPrice surtax orderCode 
			orderProgressCode deliveryInfo ioCode name
			
			$('#goodsNo').change(function(){
			    let str = $('#goodsNo').val();
			    
			}) 
			proPrice 
			surtax 
			ioCode 
			name
			
			let goodsNo = document.getElementById('goodsNo');
			let proPrice = document.getElementById('proPrice');
			let surtax = document.getElementById('surtax');
			
			let orderCode = document.getElementById('orderCode');
			let orderProgressCode = document
					.getElementById('orderProgressCode');
			let deliveryInfo = document.getElementById('deliveryInfo');
			let ioCode = document.getElementById('ioCode');
			let name = document.getElementById('name');
			

			function insertOrder() {
				
				$.ajax({
					url : "/orders/insertOrderAjax",
					method : "POST",
					dataType : "JSON",
					success : function(data) {
						if (data > 0) {
							alert("등록완료");

							console.log(data);

						} else {
							alert("등록실패");

						}

					},
					error : function(reject) {
						console.log(reject);
					}
				});

			}

			-------------------*/
		</script>
	</div>
</body>
</html>